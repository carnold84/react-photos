var ReactPhotos=React.createClass({displayName:"ReactPhotos",constants:{appStates:{albums:"albums",photos:"photos",photo:"photo"}},getInitialState:function(){return{appState:this.constants.appStates.albums,albums:void 0}},componentDidMount:function(){var a=this.update;fetch(this.props.source,{method:"get"}).then(function(a){return a.json()}).then(function(b){a(b.albums)})["catch"](function(a){})},update:function(a){this.setState({albums:a})},onAlbumClick:function(a){var b,c=a.currentTarget.getAttribute("data-index");void 0!==c&&(b=this.state.albums[c],this.setState({appState:this.constants.appStates.photos,currentAlbum:b})),a.preventDefault()},onPhotoClick:function(a){var b,c=a.currentTarget.getAttribute("data-index");void 0!==c&&(b=this.state.currentAlbum.photos[c],this.setState({appState:this.constants.appStates.photo,currentPhoto:b})),a.preventDefault()},onPhotosBackClick:function(){this.setState({appState:this.constants.appStates.albums,currentAlbum:void 0})},onPhotoBackClick:function(){this.setState({appState:this.constants.appStates.photos,currentPhoto:void 0})},createImages:function(a,b){var c,d,d,e,f,g=0,h=[];for(c=a.length,g;c>g;g++)d=a[g],void 0!==d.photos&&d.photos.length>0?f=d.photos[0].url:void 0!==d.url&&(f=d.url),e="image"+g,h.push(React.createElement(Image,{title:d.title,imageUrl:f,callback:b,index:g,key:e}));return h},render:function(){var a,b,c;return this.state.appState===this.constants.appStates.albums?void 0!==this.state.albums&&(a=this.createImages(this.state.albums,this.onAlbumClick),c=React.createElement("section",null,React.createElement(Grid,{items:a}))):this.state.appState===this.constants.appStates.photos?void 0!==this.state.currentAlbum&&void 0!==this.state.currentAlbum.photos&&(b=this.createImages(this.state.currentAlbum.photos,this.onPhotoClick),c=React.createElement("section",null,React.createElement(TitleBar,{title:this.state.currentAlbum.title,callback:this.onPhotosBackClick}),React.createElement(Grid,{items:b}))):this.state.appState===this.constants.appStates.photo&&void 0!==this.state.currentAlbum.photos&&void 0!==this.state.currentPhoto&&(photo=this.state.currentPhoto,c=React.createElement("section",null,React.createElement(TitleBar,{title:photo.title,callback:this.onPhotoBackClick}),React.createElement(Slide,{imageUrl:photo.url}))),React.createElement("div",{className:"content"},c)}});ReactDOM.render(React.createElement(ReactPhotos,{source:"sample_data.json"}),document.getElementById("container"));var Grid=React.createClass({displayName:"Grid",render:function(){var a=this.props.items;return React.createElement("div",{className:"grid"},a)}}),Image=React.createClass({displayName:"Image",render:function(){var a,b,c;return this.props.title&&(c=React.createElement("h3",{className:"image__title"},this.props.title)),b={backgroundImage:"url("+this.props.imageUrl+")"},a=this.props.callback?React.createElement("a",{className:"image",onClick:this.props.callback,"data-index":this.props.index,href:"#",style:b},c):React.createElement("div",{className:"image",style:b},c)}}),Slide=React.createClass({displayName:"Slide",render:function(){var a={backgroundImage:"url("+this.props.imageUrl+")"};return React.createElement("div",{className:"slide",style:a})}}),TitleBar=React.createClass({displayName:"TitleBar",onBackClick:function(a){this.props.callback(),a.preventDefault()},render:function(){return React.createElement("header",{className:"title-bar"},React.createElement("a",{className:"title-bar__back-btn",href:"#",onClick:this.onBackClick,title:"Back"}),React.createElement("h2",{className:"title-bar__title"},React.createElement("span",{className:"title-bar__title-inner"},this.props.title)))}});